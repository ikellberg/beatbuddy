## Код-ревью: US-012 — Система локаций (архитектура)

### Вердикт: Готов к коммиту

### Замечания к коду

1. **[ЗАМЕЧАНИЕ]** **src/web/js/Animator.js, строка 61**: Контракт интерфейса локации расширен относительно AC/technicalNotes.
   - Сейчас: `Animator` вызывает `location.init(container, w, h)` и передаёт `phase` в `location.onBeat(phase)`.
   - Нужно: Зафиксировать это в документации стори/архитектуры как официальный расширенный контракт, либо вернуть базовый контракт `init(container)` и `onBeat()` без обязательных аргументов.
   - Причина: В `docs/user_stories.json` для US-012 указан интерфейс `init(container), onBeat(), onHit(zone), destroy()`. Текущая реализация создаёт скрытую связность между `Animator` и конкретными локациями.

2. **[ЗАМЕЧАНИЕ]** **src/web/js/Animator.js, строки 60-61**: Нет защитного контура вокруг `LocationRegistry.create()` и `location.init()`.
   - Сейчас: При исключении в фабрике/инициализации локации `start()` завершится ошибкой и может сорвать запуск сессии.
   - Нужно: Обернуть создание/инициализацию локации в `try/catch` с fallback на `LocationRegistry.getDefaultId()` и обновлением `status`/UI сообщения, как это уже сделано для ошибок Pixi/WebGL.
   - Причина: По `project_state.md` архитектура рассчитана на расширение новыми локациями; одна дефектная локация не должна ломать всю сессию.
